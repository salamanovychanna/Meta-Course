import { useState } from "react";

const Reservation = ({ id, occasion, guestsCount, dateTimeUTC, deleteReservation, mediumWidth }) => {
    const [modal, setModal] = useState(true);


    const dateObjectUTC = dateTimeUTC.toDate()

    const date = dateObjectUTC.getDate()
    const month = dateObjectUTC.toLocaleString('default', { month: 'long' })
    const dateTime = dateObjectUTC.toLocaleTimeString('default', { hour: '2-digit', minute: '2-digit' })

    return (
        <>
            {
                mediumWidth
                    ?
                    <article className="reservations-item-mw-article" >
                        <div className="reservations-item-mw-header">
                            <h3>{occasion} booking</h3>
                            <button className="reservations-item-mw-button" onClick={() => setModal(s => !s)} style={{ background: 'none', border: 'none' }}>
                                <svg style={{ margin: "auto 0" }} xmlns="http://www.w3.org/2000/svg" width="30" height="6" viewBox="0 0 30 6" fill="none">
                                    <circle cx="3" cy="3" r="3" fill="#EDEFEE" />
                                    <circle cx="15" cy="3" r="3" fill="#EDEFEE" />
                                    <circle cx="27" cy="3" r="3" fill="#EDEFEE" />
                                </svg>
                                {modal
                                    ||
                                    <div className="reservations-item-modal">
                                        <button onClick={() => deleteReservation(id)} style={{ background: 'none', border: 'none' }}>
                                            Cancel
                                        </button>
                                    </div>
                                }
                            </button>
                        </div>
                        <p className="reservations-item-mw-p">

                            <svg style={{marginRight:"9px"}} width="20" height="26" viewBox="0 0 20 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fillRule="evenodd" clipRule="evenodd" d="M5.40546 14.3776C3.01718 14.3776 1.08109 16.1914 1.08109 18.4289V25.4305H0V18.4289C0 15.6321 2.42011 13.3648 5.40546 13.3648H6.36903C9.35439 13.3648 11.7745 15.6321 11.7745 18.4289V25.4305H10.6934V18.4289C10.6934 16.1914 8.75732 14.3776 6.36903 14.3776H5.40546Z" fill="#EDEFEE" />
                                <path fillRule="evenodd" clipRule="evenodd" d="M8.22656 14.4225C8.22656 11.7104 10.5734 9.51178 13.4683 9.51178H14.5956C17.5809 9.51178 20.0011 11.779 20.0011 14.5759V21.5775H18.92V14.5759C18.92 12.3384 16.9839 10.5246 14.5956 10.5246H13.4683C11.1704 10.5246 9.30765 12.2697 9.30765 14.4225H8.22656Z" fill="#EDEFEE" />
                                <path fillRule="evenodd" clipRule="evenodd" d="M5.88711 9.7758C7.33436 9.7758 8.50758 8.67667 8.50758 7.32082C8.50758 5.96497 7.33436 4.86584 5.88711 4.86584C4.43986 4.86584 3.26664 5.96497 3.26664 7.32082C3.26664 8.67667 4.43986 9.7758 5.88711 9.7758ZM5.88711 10.7886C7.93143 10.7886 9.58867 9.23603 9.58867 7.32082C9.58867 5.40561 7.93143 3.85303 5.88711 3.85303C3.84279 3.85303 2.18555 5.40561 2.18555 7.32082C2.18555 9.23603 3.84279 10.7886 5.88711 10.7886Z" fill="#EDEFEE" />
                                <path fillRule="evenodd" clipRule="evenodd" d="M14.1137 5.92277C15.5609 5.92277 16.7341 4.82364 16.7341 3.46779C16.7341 2.11195 15.5609 1.01282 14.1137 1.01282C12.6664 1.01282 11.4932 2.11195 11.4932 3.46779C11.4932 4.82364 12.6664 5.92277 14.1137 5.92277ZM14.1137 6.93559C16.158 6.93559 17.8152 5.38301 17.8152 3.46779C17.8152 1.55258 16.158 0 14.1137 0C12.0694 0 10.4121 1.55258 10.4121 3.46779C10.4121 5.38301 12.0694 6.93559 14.1137 6.93559Z" fill="#EDEFEE" />
                            </svg>
                            <span style={{fontSize: "14px"}}>{guestsCount}</span>
                        </p>
                        <p className="reservations-item-mw-p">
                            <svg style={{marginRight:"9px"}} width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M13.2829 0.769794C13.2829 0.345024 13.7028 0 14.222 0C14.7412 0 15.1611 0.345024 15.1611 0.769794V4.14192C15.1611 4.56669 14.7412 4.91171 14.222 4.91171C13.7028 4.91171 13.2829 4.56669 13.2829 4.14192V0.769794ZM10.7601 17.1959C10.6299 17.1959 10.6299 15.5521 10.7601 15.5521H13.3301C13.4603 15.5521 13.4603 17.1959 13.3301 17.1959H10.7601ZM2.57975 11.2198C2.44954 11.2198 2.44954 9.57604 2.57975 9.57604H5.14974C5.27995 9.57604 5.27995 11.2198 5.14974 11.2198H2.57975ZM6.66992 11.2198C6.53971 11.2198 6.53971 9.57604 6.66992 9.57604H9.23991C9.37012 9.57604 9.37012 11.2198 9.23991 11.2198H6.66992ZM10.7601 11.2198C10.6299 11.2198 10.6299 9.57604 10.7601 9.57604H13.3301C13.4603 9.57604 13.4603 11.2198 13.3301 11.2198H10.7601ZM14.8519 9.57604H17.4154C17.5456 9.57604 17.5456 11.2198 17.4154 11.2198H14.8519C14.7217 11.2198 14.7217 9.57604 14.8519 9.57604ZM2.57975 14.2078C2.44954 14.2078 2.44954 12.5641 2.57975 12.5641H5.14974C5.27995 12.5641 5.27995 14.2078 5.14974 14.2078H2.57975ZM6.67318 14.2078C6.54297 14.2078 6.54297 12.5641 6.67318 12.5641H9.23991C9.37012 12.5641 9.37012 14.2078 9.23991 14.2078H6.67318ZM10.7633 14.2078C10.6331 14.2078 10.6331 12.5641 10.7633 12.5641H13.3301C13.4603 12.5641 13.4603 14.2078 13.3301 14.2078H10.7633ZM14.8551 14.2078C14.7249 14.2078 14.7249 12.5641 14.8551 12.5641H17.4154C17.5456 12.5641 17.5456 14.2078 17.4154 14.2078H14.8551ZM2.58301 17.1959C2.4528 17.1959 2.4528 15.5521 2.58301 15.5521H5.14974C5.27995 15.5521 5.27995 17.1959 5.14974 17.1959H2.58301ZM6.67318 17.1959C6.54297 17.1959 6.54297 15.5521 6.67318 15.5521H9.23991C9.37012 15.5521 9.37012 17.1959 9.23991 17.1959H6.67318ZM4.81934 0.769794C4.81934 0.345024 5.23926 0 5.75846 0C6.27767 0 6.69759 0.345024 6.69759 0.769794V4.14192C6.69759 4.56669 6.27767 4.91171 5.75846 4.91171C5.23926 4.91171 4.81934 4.56669 4.81934 4.14192V0.769794ZM1.04167 7.07462H18.9567V3.49418C18.9553 3.36802 18.9052 3.24729 18.8167 3.1573C18.7726 3.11293 18.7201 3.07772 18.6622 3.0537C18.6044 3.02968 18.5424 3.01732 18.4798 3.01733H16.7643C16.6262 3.01733 16.4937 2.96246 16.396 2.8648C16.2984 2.76713 16.2435 2.63466 16.2435 2.49654C16.2435 2.35842 16.2984 2.22595 16.396 2.12829C16.4937 2.03062 16.6262 1.97575 16.7643 1.97575H18.4814C18.8838 1.97704 19.2693 2.13743 19.5538 2.42191C19.8383 2.70639 19.9987 3.09186 20 3.49418V18.4816C19.9987 18.8839 19.8383 19.2694 19.5538 19.5538C19.2693 19.8383 18.8838 19.9987 18.4814 20H1.51855C1.11592 19.9987 0.730176 19.8381 0.445624 19.5533C0.161072 19.2684 0.000858262 18.8825 0 18.4799L0 3.49418C0.00128753 3.09186 0.161691 2.70639 0.446197 2.42191C0.730702 2.13743 1.11621 1.97704 1.51855 1.97575H3.35286C3.42126 1.97575 3.48899 1.98922 3.55218 2.01539C3.61537 2.04157 3.67279 2.07993 3.72115 2.12829C3.76951 2.17665 3.80788 2.23406 3.83405 2.29724C3.86023 2.36043 3.8737 2.42815 3.8737 2.49654C3.8737 2.56493 3.86023 2.63265 3.83405 2.69584C3.80788 2.75902 3.76951 2.81644 3.72115 2.8648C3.67279 2.91316 3.61537 2.95152 3.55218 2.97769C3.48899 3.00386 3.42126 3.01733 3.35286 3.01733H1.51855C1.39238 3.01871 1.27164 3.06887 1.18164 3.1573C1.13727 3.20146 1.10206 3.25396 1.07804 3.31177C1.05402 3.36959 1.04166 3.43158 1.04167 3.49418V7.07462ZM18.9583 8.11783H1.04167V18.4799C1.04304 18.6061 1.0932 18.7268 1.18164 18.8168C1.22581 18.8612 1.27831 18.8964 1.33613 18.9204C1.39395 18.9444 1.45594 18.9568 1.51855 18.9568H18.4814C18.6076 18.9554 18.7284 18.9053 18.8184 18.8168C18.8627 18.7727 18.8979 18.7202 18.922 18.6623C18.946 18.6045 18.9583 18.5425 18.9583 18.4799V8.11783ZM8.20801 3.01733C8.06987 3.01733 7.9374 2.96246 7.83972 2.8648C7.74205 2.76713 7.68717 2.63466 7.68717 2.49654C7.68717 2.35842 7.74205 2.22595 7.83972 2.12829C7.9374 2.03062 8.06987 1.97575 8.20801 1.97575H11.7057C11.7741 1.97575 11.8419 1.98922 11.905 2.01539C11.9682 2.04157 12.0257 2.07993 12.074 2.12829C12.1224 2.17665 12.1607 2.23406 12.1869 2.29724C12.2131 2.36043 12.2266 2.42815 12.2266 2.49654C12.2266 2.56493 12.2131 2.63265 12.1869 2.69584C12.1607 2.75902 12.1224 2.81644 12.074 2.8648C12.0257 2.91316 11.9682 2.95152 11.905 2.97769C11.8419 3.00386 11.7741 3.01733 11.7057 3.01733H8.20801Z" fill="white" />
                            </svg>

                            <span style={{fontSize: "14px"}}>{month + " " + date}</span>
                        </p>
                        <p className="reservations-item-mw-p">
                            <svg style={{marginRight:"9px"}} width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fillRule="evenodd" clip-rule="evenodd" d="M9.14286 4.57143H10.2857V10.1946L13.9394 11.7605L13.4892 12.8109L9.14286 10.9482V4.57143Z" fill="white" />
                                <path fillRule="evenodd" clip-rule="evenodd" d="M10 18.8571C14.8917 18.8571 18.8571 14.8917 18.8571 10C18.8571 5.10834 14.8917 1.14286 10 1.14286C5.10834 1.14286 1.14286 5.10834 1.14286 10C1.14286 14.8917 5.10834 18.8571 10 18.8571ZM10 20C15.5228 20 20 15.5228 20 10C20 4.47715 15.5228 0 10 0C4.47715 0 0 4.47715 0 10C0 15.5228 4.47715 20 10 20Z" fill="white" />
                            </svg>
                            <span style={{fontSize: "14px"}}>{dateTime}</span>
                        </p>


                    </article>
                    :
                    <tr className="reservations-tr" key={id}>
                        <td>{occasion} booking</td>
                        <td>{guestsCount}</td>
                        <td>{month + " " + date}</td>
                        <td>{dateTime}</td>
                        <td align="right">
                            <button className="reservations-item-button" onClick={() => setModal(s => !s)} style={{ background: 'none', border: 'none' }}>
                                <svg style={{ margin: "auto 0" }} xmlns="http://www.w3.org/2000/svg" width="30" height="6" viewBox="0 0 30 6" fill="none">
                                    <circle cx="3" cy="3" r="3" fill="#EDEFEE" />
                                    <circle cx="15" cy="3" r="3" fill="#EDEFEE" />
                                    <circle cx="27" cy="3" r="3" fill="#EDEFEE" />
                                </svg>
                                {modal
                                    ||
                                    <div className="reservations-item-modal">
                                        <button onClick={() => deleteReservation(id)} style={{ background: 'none', border: 'none' }}>
                                            Cancel
                                        </button>
                                    </div>
                                }
                            </button>
                        </td>
                    </tr>
            }
        </>
    )
}

export default Reservation;